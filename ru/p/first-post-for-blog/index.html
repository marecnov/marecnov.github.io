<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="keywords" content="Marecnov, Marek Ivanov, Blog" />
<meta name="description" content="Marek Ivanov`s Blog right here!" />
<meta property="og:url" content="https://marecnov.github.io/ru">
<meta property="og:type" content="website">
<meta property="og:title" content="Блог Марека Иванов">
<meta property="og:description" content="Обо мне - о всех">
<meta property="og:image" content="https://marecnov.github.io//static/previewRu.png">
<meta name="twitter:card" content="summary_large_image">
<link rel="shortcut icon" href="/static/favicon.svg?h=d93feae4" type="image/svg+xml">
<link rel="stylesheet" href="/static/style.css?h=cb7238f9">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;1,300;1,400&display=swap" rel="stylesheet">
<title>Первый пост для блога</title>
</head>
<body>
<header><a href="/ru/" class="blog-author"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none"><circle cx="16" cy="16" r="16" fill="#5C5CFF"/><path d="M1.85 15.9921L12.9 12.9L15.9921 1.85001L19.1 12.9L30.1343 15.9921L19.1 19.1L15.9921 30.1343L12.9 19.25L1.85 15.9921Z" fill="white"/></svg>marecnov</a>
<a id="settingsLink" style="cursor: pointer;"><i class="fa fa-cog" aria-hidden="true"></i></a>
  <div id="myModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Настройки</h2>
          <span class="close">&times;</span>
        </div>
        <div class="modal-body">
          <section><div><i class="fa fa-globe" aria-hidden="true"></i> Язык</div>
              <select>
                  <option value="en">Английский</option>
                  <option value="ru">Русский</option>
              </select>
          </section>
          <section><div><i class="fa fa-moon-o" aria-hidden="true"></i> Темный режим</div>
          <input type="checkbox">
          </section>
        </div>
        <div class="modal-footer">
          <button>Применить</button>
        </div>
      </div>
  </div>
  <script>
    var modal = document.getElementById("myModal")
    var link = document.getElementById("settingsLink")
    var span = document.querySelector(".modal-header .close")
    let applyBtn = document.querySelector('.modal-footer button')
    let inputs = [document.querySelector('.modal-body select'),document.querySelector('.modal-body input')]

    link.onclick = function() {
      modal.style.display = "block"
      loadSettings()
    }
    span.onclick = function() {
      modal.style.display = "none"
    }
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none"
      }
    }
    applyBtn.onclick = function(){
      let settings = {
        darkMode: inputs[1].checked ? 'dark' : 'light',
        lang: inputs[0].value
      }
      localStorage.setItem('SETTINGS', JSON.stringify(settings))
      loadSettings()
      modal.style.display = "none"
    }

    function loadSettings(){
      let defaultSettings = {
        darkMode: window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light',
        lang: window.location.pathname.startsWith('/ru') ? 'ru' : 'en'
      }
      let settings = localStorage.getItem('SETTINGS') ? JSON.parse(localStorage.getItem('SETTINGS')) : defaultSettings;
      
      inputs[0].value = settings.lang
      inputs[1].checked = settings.darkMode == 'dark'

      document.documentElement.classList.add(settings.darkMode);
      document.documentElement.classList.remove(settings.darkMode == 'light' ? 'dark' : 'light')
      
      if (settings.lang != defaultSettings.lang) {
        let newPath = settings.lang == 'ru' ? '/ru' + window.location.pathname + window.location.hash : window.location.pathname.substring(3) + window.location.hash;
        window.location.replace(window.location.origin + newPath)
      }
  }
  loadSettings()
  </script>
</header>    
<main><div class="layout">

<div id="bioRuSocket"></div>

<div class="posts" id="top">
<article class="post">
    <div class="title">
    <h2>Первый пост для блога</h2>
    <p>9 июля 2023</p>
    </div>
    <section><p>Давай начнем с этого примера!</p>
</section>
    </article>

</div>
<div class="post-list">
        <h3>Последние Посты</h3>
        <a href="/ru/p/autocad-interpolation-plugin/" ><b>Plugin для интерполирования в программе AutoCAD</b> <small>2&nbsp;июля&nbsp;2024</small></a><a href="/ru/p/vivamus-cras/" ><b>Слова упали на лист бумаги</b> <small>2&nbsp;января&nbsp;2024</small></a><a href="/ru/p/odarenie/" ><b>Одарение</b> <small>27&nbsp;декабря&nbsp;2023</small></a><a href="/ru/p/vozzvanie/" ><b>Воззвание</b> <small>26&nbsp;ноября&nbsp;2023</small></a><a href="/ru/p/dva-stiha/" ><b>Два стиха</b> <small>13&nbsp;сентября&nbsp;2023</small></a><a href="/ru/p/what-purpose-does-my-blog-serve/" ><b>Какой целе служит этот блог?</b> <small>21&nbsp;июля&nbsp;2023</small></a><a href="/ru/p/new-legendary-favicon/" ><b>Новый легендарная иконка и еще многое</b> <small>12&nbsp;июля&nbsp;2023</small></a><a href="/ru/p/first-post-for-blog/" class="current"><b>Первый пост для блога</b> <small>9&nbsp;июля&nbsp;2023</small></a></div>

</div>
<script>
    function splitHTMLAndScript(text) {
      const scriptRegex = /<script[^>]*>([\s\S]*?)<\/script>/i;
      const script = text.match(scriptRegex)[1] || '';
      const html = text.replace(scriptRegex, '').trim();
      return {
        html: html,
        script: script
      };
  }
    function fetchContent(elID, url) {
      fetch(url,{method: "GET"})
        .then(response => {
          if (!response.ok) {
              throw new Error('Network response was not ok');
          } 
          return response.text();
        })
        .then(receivedText => {
          let { html,script } = splitHTMLAndScript(receivedText)
          localStorage.setItem(elID,JSON.stringify({"html":html,"script": script,"timestamp":new Date()}))
          loadContent(elID);
        })
        .catch(error => {
          console.error('There has been a problem with your fetch operation:', error);
          document.getElementById(elID).innerText = 'Error loading content';
        });
    }
    function loadContent(elID){
        const data = JSON.parse(localStorage.getItem(elID))
        document.getElementById(elID).innerHTML = data?.html;
        const script = document.createElement('script');
        script.textContent = data?.script;
        document.getElementById(elID).appendChild(script);
    }
    let bundleIds = {
        "bioRuSocket": "https://marecnov.github.io/bundles/bioRu/",
    }
  
    Object.keys(bundleIds).forEach(elID => {
        if((localStorage.getItem(elID,null) != null)){
            if ((new Date() - new Date(JSON.parse(localStorage.getItem(elID)).timestamp))/(1000*60*60)>=24){
                fetchContent(elID, bundleIds[elID])
            } else{
                loadContent(elID)
            }
        } else{
            fetchContent(elID, bundleIds[elID])
        }
    })
  
  </script></main>
</body>
</html>
