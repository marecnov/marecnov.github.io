let modal=document.getElementById("myModal"),link=document.getElementById("settingsLink"),span=document.querySelector(".modal-header .close"),applyBtn=document.querySelector(".modal-footer button"),inputs=[document.querySelector(".modal-body select"),document.querySelector(".modal-body input")];function loadSettings(){let e={darkMode:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",lang:window.location.pathname.startsWith("/ru")?"ru":"en"},t=localStorage.getItem("SETTINGS")?JSON.parse(localStorage.getItem("SETTINGS")):e;if(inputs[0].value=t.lang,inputs[1].checked="dark"==t.darkMode,document.documentElement.classList.add(t.darkMode),document.documentElement.classList.remove("light"==t.darkMode?"dark":"light"),t.lang!=e.lang){let e="ru"==t.lang?"/ru"+window.location.pathname+window.location.hash:window.location.pathname.substring(3)+window.location.hash;window.location.replace(window.location.origin+e)}}link.onclick=function(){modal.style.display="block",loadSettings()},span.onclick=function(){modal.style.display="none"},window.onclick=function(e){e.target==modal&&(modal.style.display="none")},applyBtn.onclick=function(){let e={darkMode:inputs[1].checked?"dark":"light",lang:inputs[0].value};localStorage.setItem("SETTINGS",JSON.stringify(e)),loadSettings(),modal.style.display="none"},loadSettings();
